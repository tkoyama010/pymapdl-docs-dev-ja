
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/02-tips-n-tricks/05-explore_mapdl_files.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_gallery_examples_02-tips-n-tricks_05-explore_mapdl_files.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_02-tips-n-tricks_05-explore_mapdl_files.py:


.. _ref_xpl_example:

Binary MAPDL File Explorer
--------------------------

This tutorial will demonstrate how to explore the content of binary
files generated by a MAPDL Session and extract pertinent records.

These files include most of the binary files generated by APDL
(e.g. `.RST`, `.FULL`, etc.).

.. GENERATED FROM PYTHON SOURCE LINES 36-52

.. code-block:: Python


    from ansys.mapdl.core import launch_mapdl

    # Start MAPDL as a service and disable all but error messages.
    from ansys.mapdl.core.examples import vmfiles

    mapdl = launch_mapdl()

    # A specific property under the mapdl class is dedicated for XPL. It's
    # based on the APDLMath `*XPL` command.
    xpl = mapdl.xpl

    # Many commands are directly accessible through the xpl class:
    help(xpl)



.. GENERATED FROM PYTHON SOURCE LINES 53-60

Open and explore a file
~~~~~~~~~~~~~~~~~~~~~~~
First you need to open an existing file.  We can create an example
result file by running a verification manual input file and then
opening the result file that it creates.

NOTE: for now only one file can be opened at a time

.. GENERATED FROM PYTHON SOURCE LINES 60-65

.. code-block:: Python


    # run Verification Manual 1 and opening the result file it creates
    mapdl.input(vmfiles["vm1"])
    print(xpl.open("file.rst"))


.. GENERATED FROM PYTHON SOURCE LINES 66-69

Using the `list` function, you can list the records available at
the current level.


.. GENERATED FROM PYTHON SOURCE LINES 69-72

.. code-block:: Python

    print(xpl.list())



.. GENERATED FROM PYTHON SOURCE LINES 73-75

Using the `step` and `up` functions, you can go down into a specific
branch of the tree, or go up to the top level

.. GENERATED FROM PYTHON SOURCE LINES 75-79

.. code-block:: Python

    xpl.step("GEO")
    print(xpl.list())



.. GENERATED FROM PYTHON SOURCE LINES 80-82

Display where you are in the tree or records:


.. GENERATED FROM PYTHON SOURCE LINES 82-85

.. code-block:: Python

    print(xpl.where())



.. GENERATED FROM PYTHON SOURCE LINES 86-88

Go up one level to move back to the top and then list the records at
the current point.

.. GENERATED FROM PYTHON SOURCE LINES 88-92

.. code-block:: Python

    xpl.up()
    print(xpl.list())



.. GENERATED FROM PYTHON SOURCE LINES 93-101

Read a record into an APDLMath Vector
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The `info` method will give you information about a record
(e.g. length, data type, etc.)

Using the `read` method, you can read a specific record and fill an
APDLMath object.


.. GENERATED FROM PYTHON SOURCE LINES 101-106

.. code-block:: Python

    print(xpl.info("DOF"))
    v = xpl.read("DOF")
    print(v)



.. GENERATED FROM PYTHON SOURCE LINES 107-109

To get this vector into a NumPy array you need to explicitly use `asarray`:


.. GENERATED FROM PYTHON SOURCE LINES 109-113

.. code-block:: Python

    nod = v.asarray()
    print(nod)



.. GENERATED FROM PYTHON SOURCE LINES 114-117

Read the first nodal solution
First we go into the first solution set


.. GENERATED FROM PYTHON SOURCE LINES 117-121

.. code-block:: Python

    print(xpl.goto("DSI::SET1"))
    print(xpl.list())



.. GENERATED FROM PYTHON SOURCE LINES 122-124

Then we read the Nodal solution vector `"NSL"` into a numpy array


.. GENERATED FROM PYTHON SOURCE LINES 124-129

.. code-block:: Python

    u = xpl.read("NSL")
    un = u.asarray()
    print(un)



.. GENERATED FROM PYTHON SOURCE LINES 130-131

Close an opened file

.. GENERATED FROM PYTHON SOURCE LINES 131-134

.. code-block:: Python

    print(xpl.close())



.. GENERATED FROM PYTHON SOURCE LINES 135-138

Stop mapdl
~~~~~~~~~~


.. GENERATED FROM PYTHON SOURCE LINES 138-139

.. code-block:: Python

    mapdl.exit()


.. _sphx_glr_download_examples_gallery_examples_02-tips-n-tricks_05-explore_mapdl_files.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 05-explore_mapdl_files.ipynb <05-explore_mapdl_files.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 05-explore_mapdl_files.py <05-explore_mapdl_files.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: 05-explore_mapdl_files.zip <05-explore_mapdl_files.zip>`
